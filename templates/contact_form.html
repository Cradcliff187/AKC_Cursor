{% extends "base.html" %}
{% from 'components/forms.html' import form_group, select_group, textarea_group, address_form_group %}
{% from 'components/cards.html' import form_card %}

{% block title %}{% if contact %}Edit{% else %}New{% endif %} Contact{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            {% set form_content %}
                <!-- Basic Information -->
                <div class="row">
                    <div class="col-md-6">
                        {{ form_group("Full Name", "name", value=contact.name if contact else "", required=true) }}
                    </div>
                    <div class="col-md-6">
                        {{ select_group("Contact Type", "type",
                            options=[
                                {"value": "client", "label": "Client"},
                                {"value": "vendor", "label": "Vendor"},
                                {"value": "employee", "label": "Employee"},
                                {"value": "other", "label": "Other"}
                            ],
                            selected=contact.type if contact else "",
                            required=true
                        ) }}
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        {{ form_group("Email", "email", type="email", value=contact.email if contact else "") }}
                    </div>
                    <div class="col-md-6">
                        {{ form_group("Phone", "phone", type="tel", value=contact.phone if contact else "", required=true) }}
                    </div>
                </div>

                <!-- Address Information -->
                {{ address_form_group(
                    value={
                        'street': contact.address.street if contact and contact.address else '',
                        'city': contact.address.city if contact and contact.address else '',
                        'state': contact.address.state if contact and contact.address else '',
                        'zip': contact.address.zip if contact and contact.address else '',
                        'latitude': contact.address.latitude if contact and contact.address else '',
                        'longitude': contact.address.longitude if contact and contact.address else ''
                    } if contact else {},
                    required=false
                ) }}

                <!-- Additional Information -->
                <div class="row">
                    <div class="col-md-6">
                        {{ form_group("Company", "company", value=contact.company if contact else "") }}
                    </div>
                    <div class="col-md-6">
                        {{ form_group("Job Title", "job_title", value=contact.job_title if contact else "") }}
                    </div>
                </div>

                {{ textarea_group("Notes", "notes", value=contact.notes if contact else "", rows=4) }}
            {% endset %}

            {{ form_card(
                title="Contact Information",
                form_content=form_content,
                submit_text="Save Contact",
                cancel_url=url_for('contacts'),
                delete_action=url_for('delete_contact', contact_id=contact.id) if contact else None
            ) }}
        </div>
    </div>
</div>
{% endblock %} 